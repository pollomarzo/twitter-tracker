{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, TextField, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow } from \"./\";\nimport styles from \"../../styles/Home.module.css\";\nvar useStyles = makeStyles(function () {\n  var _textField;\n\n  return {\n    textField: (_textField = {\n      margin: 10,\n      width: 300\n    }, _defineProperty(_textField, \"& fieldset\", {\n      borderWidth: 2,\n      borderRadius: 25\n    }), _defineProperty(_textField, \"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\", {\n      borderColor: \"#1DA1F2\"\n    }), _defineProperty(_textField, \"& .MuiOutlinedInput-input\", {\n      color: \"#1DA1F2\"\n    }), _defineProperty(_textField, \"& .MuiInputLabel-outlined\", {\n      color: \"#1DA1F2\"\n    }), _textField),\n    submitButton: {\n      margin: 10,\n      width: 100,\n      fontWeight: 800,\n      color: \"white\",\n      backgroundColor: \"#1DA1F2\",\n      \"&:hover\": {\n        backgroundColor: \"lightblue\",\n        color: \"#1DA1F2\"\n      }\n    }\n  };\n});\n\nvar MainContainer = function MainContainer() {\n  var _useStyles = useStyles(),\n      textField = _useStyles.textField,\n      submitButton = _useStyles.submitButton; // To set the id of the current stream\n\n\n  var _useState = useState(undefined),\n      streamId = _useState[0],\n      setStreamId = _useState[1];\n\n  var _useState2 = useState(false),\n      error = _useState2[0],\n      setError = _useState2[1]; // A set of coords to initialize a geolocalized stream\n\n\n  var _useState3 = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0\n  }),\n      coords = _useState3[0],\n      setCoordinates = _useState3[1];\n\n  var handleChange = function handleChange(e) {\n    return setCoordinates(_objectSpread(_objectSpread({}, coords), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var openStream = function openStream() {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n    var correctInput = true;\n    var correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\"); // Check if the params are correct\n\n    Object.values(coords).forEach(function (value) {\n      return correctInput = correctInput && correctFormatRegEx.test(value);\n    });\n\n    if (correctInput) {\n      axios.post(\"/api/geoFilter\", {\n        coordinates: \"\".concat(coords.longitudeStart, \",\").concat(coords.latitudeStart, \",\").concat(coords.longitudeEnd, \",\").concat(coords.latitudeEnd)\n      }).then(function (res) {\n        return setStreamId(res.data);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    } else setError(true);\n  };\n\n  var closeStream = function closeStream() {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n    axios[\"delete\"](\"/api/geoFilter\", {\n      data: {\n        id: streamId\n      },\n      headers: {\n        Authorization: \"***\"\n      }\n    }).then(function (_) {\n      return setStreamId(undefined);\n    })[\"catch\"](function (err) {\n      return console.warn(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsx(NoSsr, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsx(\"header\", {\n        className: styles.title,\n        children: /*#__PURE__*/_jsx(\"h1\", {\n          className: styles.titleH1,\n          children: \"TWITTER TRACKER\"\n        })\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsx(TextField, {\n          id: \"longitudeStart\",\n          className: textField,\n          label: \"Longitude start\",\n          variant: \"outlined\",\n          name: \"longitudeStart\",\n          required: true,\n          onChange: handleChange\n        }), /*#__PURE__*/_jsx(TextField, {\n          id: \"latitudeStart\",\n          className: textField,\n          label: \"Latitude start\",\n          variant: \"outlined\",\n          name: \"latitudeStart\",\n          required: true,\n          onChange: handleChange\n        }), /*#__PURE__*/_jsx(TextField, {\n          id: \"longitudeEnd\",\n          className: textField,\n          label: \"Longitude end\",\n          variant: \"outlined\",\n          name: \"longitudeEnd\",\n          required: true,\n          onChange: handleChange\n        }), /*#__PURE__*/_jsx(TextField, {\n          id: \"latitudeEnd\",\n          className: textField,\n          label: \"Latitude end\",\n          variant: \"outlined\",\n          name: \"latitudeEnd\",\n          required: true,\n          onChange: handleChange\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: styles.submit,\n          children: [/*#__PURE__*/_jsx(Button, {\n            onClick: streamId ? closeStream : openStream,\n            variant: \"contained\",\n            className: submitButton,\n            color: \"default\",\n            children: streamId ? \"STOP\" : \"START\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            children: /*#__PURE__*/_jsx(Fade, {\n              \"in\": streamId !== undefined,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsx(CircularProgress, {})\n            })\n          })]\n        }), /*#__PURE__*/_jsx(AlertWindow, {\n          isOpen: error,\n          onConfirm: setError,\n          title: \"Error\",\n          msg: \"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n        })]\n      })]\n    })\n  });\n};\n\nexport default MainContainer;","map":null,"metadata":{},"sourceType":"module"}