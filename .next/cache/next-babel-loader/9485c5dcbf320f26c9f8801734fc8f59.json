{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/notchla/Documents/IngSw/twitter-tracker/components/MainContainer.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow, InputField } from './';\nimport styles from \"../styles/Home.module.css\";\nvar useStyles = makeStyles(function () {\n  return {\n    submitButton: {\n      margin: 10,\n      width: 100,\n      fontWeight: 800,\n      color: \"white\",\n      backgroundColor: \"#1DA1F2\",\n      \"&:hover\": {\n        backgroundColor: \"lightblue\",\n        color: \"#1DA1F2\"\n      }\n    }\n  };\n});\n\nvar MainContainer = function MainContainer() {\n  _s();\n\n  var _useStyles = useStyles(),\n      textField = _useStyles.textField,\n      submitButton = _useStyles.submitButton; // To set the id of the current stream\n\n\n  var _useState = useState(undefined),\n      streamId = _useState[0],\n      setStreamId = _useState[1];\n\n  var _useState2 = useState(false),\n      error = _useState2[0],\n      setError = _useState2[1]; // A set of coords to initialize a geolocalized stream\n\n\n  var _useState3 = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0\n  }),\n      coords = _useState3[0],\n      setCoordinates = _useState3[1];\n\n  var handleChange = function handleChange(e) {\n    return setCoordinates(_objectSpread(_objectSpread({}, coords), {}, _defineProperty({}, e.target.name, e.target.value)));\n  };\n\n  var openStream = function openStream() {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n    var correctInput = true;\n    var correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\"); // Check if the params are correct\n\n    Object.values(coords).forEach(function (value) {\n      return correctInput = correctInput && correctFormatRegEx.test(value);\n    });\n\n    if (correctInput) {\n      axios.post(\"/api/geoFilter\", {\n        coordinates: \"\".concat(coords.longitudeStart, \",\").concat(coords.latitudeStart, \",\").concat(coords.longitudeEnd, \",\").concat(coords.latitudeEnd)\n      }).then(function (res) {\n        return setStreamId(res.data);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    } else setError(true);\n  };\n\n  var closeStream = function closeStream() {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n    axios[\"delete\"](\"/api/geoFilter\", {\n      data: {\n        id: streamId\n      },\n      headers: {\n        Authorization: \"***\"\n      }\n    }).then(function (_) {\n      return setStreamId(undefined);\n    })[\"catch\"](function (err) {\n      return console.warn(err);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(NoSsr, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.title,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.titleH1,\n          children: \"TWITTER TRACKER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Longitude start\",\n          fieldName: \"longitudeStart\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Latitude start\",\n          fieldName: \"latitudeStart\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Longitude end\",\n          fieldName: \"longitudeEnd\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Latitude end\",\n          fieldName: \"latitudeEnd\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.submit,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: streamId ? closeStream : openStream,\n            variant: \"contained\",\n            className: submitButton,\n            color: \"default\",\n            children: streamId ? \"STOP\" : \"START\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              \"in\": streamId !== undefined,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(AlertWindow, {\n          isOpen: error,\n          onConfirm: setError,\n          title: \"Error\",\n          msg: \"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, _this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(MainContainer, \"pgUsZPGQtVgDqM2BVDsX+2TgALU=\", false, function () {\n  return [useStyles];\n});\n\n_c = MainContainer;\nexport default MainContainer;\n\nvar _c;\n\n$RefreshReg$(_c, \"MainContainer\");","map":{"version":3,"sources":["/home/notchla/Documents/IngSw/twitter-tracker/components/MainContainer.js"],"names":["React","useState","axios","CircularProgress","Fade","Button","makeStyles","NoSsr","AlertWindow","InputField","styles","useStyles","submitButton","margin","width","fontWeight","color","backgroundColor","MainContainer","textField","undefined","streamId","setStreamId","error","setError","latitudeStart","latitudeEnd","longitudeStart","longitudeEnd","coords","setCoordinates","handleChange","e","target","name","value","openStream","correctInput","correctFormatRegEx","RegExp","Object","values","forEach","test","post","coordinates","then","res","data","err","console","log","closeStream","id","headers","Authorization","_","warn","main","title","titleH1","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow, InputField } from './'\n\nimport styles from \"../styles/Home.module.css\";\n\nconst useStyles = makeStyles(() => ({\n  submitButton: {\n    margin: 10,\n    width: 100,\n    fontWeight: 800,\n    color: \"white\",\n    backgroundColor: \"#1DA1F2\",\n    \"&:hover\": {\n      backgroundColor: \"lightblue\",\n      color: \"#1DA1F2\",\n    }\n  }\n}));\n\nconst MainContainer = () => {\n  const { textField, submitButton } = useStyles();\n  // To set the id of the current stream\n  const [streamId, setStreamId] = useState(undefined);\n  const [error, setError] = useState(false);\n\n  // A set of coords to initialize a geolocalized stream\n  const [coords, setCoordinates] = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0,\n  });\n\n  const handleChange = (e) =>\n    setCoordinates({ ...coords, [e.target.name]: e.target.value });\n\n  const openStream = () => {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n\n    let correctInput = true;\n    const correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\");\n    // Check if the params are correct\n    Object.values(coords).forEach(\n      (value) => (correctInput = correctInput && correctFormatRegEx.test(value))\n    );\n\n    if (correctInput) {\n      axios\n        .post(\"/api/geoFilter\", {\n          coordinates: `${coords.longitudeStart},${coords.latitudeStart},${coords.longitudeEnd},${coords.latitudeEnd}`,\n        })\n        .then((res) => setStreamId(res.data))\n        .catch((err) => console.log(err));\n    } else setError(true);\n  };\n\n  const closeStream = () => {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n\n    axios\n      .delete(\"/api/geoFilter\", {\n        data: { id: streamId },\n        headers: { Authorization: \"***\" },\n      })\n      .then((_) => setStreamId(undefined))\n      .catch((err) => console.warn(err));\n  };\n\n  return (\n    <NoSsr>\n      <div className={styles.main}>\n        <header className={styles.title}>\n          <h1 className={styles.titleH1}>TWITTER TRACKER</h1>\n        </header>\n\n        <div className={styles.form}>\n          <InputField label=\"Longitude start\" fieldName=\"longitudeStart\" handler={handleChange} />\n          <InputField label=\"Latitude start\" fieldName=\"latitudeStart\" handler={handleChange} />\n          <InputField label=\"Longitude end\" fieldName=\"longitudeEnd\" handler={handleChange} />\n          <InputField label=\"Latitude end\" fieldName=\"latitudeEnd\" handler={handleChange} />\n\n          <div className={styles.submit}>\n            <Button\n              onClick={streamId ? closeStream : openStream}\n              variant=\"contained\"\n              className={submitButton}\n              color=\"default\"\n            >\n              {streamId ? \"STOP\" : \"START\"}\n            </Button>\n            <div>\n              <Fade in={streamId !== undefined} unmountOnExit>\n                <CircularProgress />\n              </Fade>\n            </div>\n          </div>\n\n          <AlertWindow\n            isOpen={error}\n            onConfirm={setError}\n            title=\"Error\"\n            msg=\"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n          />\n        </div>\n      </div>\n    </NoSsr>\n  );\n};\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}