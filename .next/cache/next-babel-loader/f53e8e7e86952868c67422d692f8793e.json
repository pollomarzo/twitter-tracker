{"ast":null,"code":"const path = require(\"path\");\n\nconst dirPath = path.join(process.cwd(), \"/twitterAPI\");\n\nconst twitterAPI = require(\"../../twitterAPI/geoStream.js\");\n\nexport default function handler(req, res) {\n  return new Promise(resolve => {\n    if (req.method == \"POST\") {\n      const parameters = {\n        locations: req.body.coordinates,\n        track: req.body.hashtags\n      };\n      const coordinates = req.body.coordinates;\n      console.log(\"starting stream on \", coordinates);\n      const streamID = twitterAPI.startStream(parameters);\n      res.send(streamID);\n      resolve();\n    } else if (req.method == \"DELETE\") {\n      const streamID = req.body.id;\n      const {\n        dataJson,\n        error\n      } = twitterAPI.closeStream(streamID);\n      res.json(dataJson);\n      resolve();\n    } else {\n      res.end();\n    }\n  });\n}","map":{"version":3,"sources":["/home/notchla/Documents/IngSw/twitter-tracker/pages/api/geoFilter.js"],"names":["path","require","dirPath","join","process","cwd","twitterAPI","handler","req","res","Promise","resolve","method","parameters","locations","body","coordinates","track","hashtags","console","log","streamID","startStream","send","id","dataJson","error","closeStream","json","end"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,OAAO,GAAGF,IAAI,CAACG,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,aAAzB,CAAhB;;AACA,MAAMC,UAAU,GAAGL,OAAO,CAAC,+BAAD,CAA1B;;AAEA,eAAe,SAASM,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,QAAIH,GAAG,CAACI,MAAJ,IAAc,MAAlB,EAA0B;AACxB,YAAMC,UAAU,GAAG;AACjBC,QAAAA,SAAS,EAAEN,GAAG,CAACO,IAAJ,CAASC,WADH;AAEjBC,QAAAA,KAAK,EAAET,GAAG,CAACO,IAAJ,CAASG;AAFC,OAAnB;AAIA,YAAMF,WAAW,GAAGR,GAAG,CAACO,IAAJ,CAASC,WAA7B;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCJ,WAAnC;AACA,YAAMK,QAAQ,GAAGf,UAAU,CAACgB,WAAX,CAAuBT,UAAvB,CAAjB;AACAJ,MAAAA,GAAG,CAACc,IAAJ,CAASF,QAAT;AACAV,MAAAA,OAAO;AACR,KAVD,MAUO,IAAIH,GAAG,CAACI,MAAJ,IAAc,QAAlB,EAA4B;AACjC,YAAMS,QAAQ,GAAGb,GAAG,CAACO,IAAJ,CAASS,EAA1B;AACA,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAsBpB,UAAU,CAACqB,WAAX,CAAuBN,QAAvB,CAA5B;AACAZ,MAAAA,GAAG,CAACmB,IAAJ,CAASH,QAAT;AACAd,MAAAA,OAAO;AACR,KALM,MAKA;AACLF,MAAAA,GAAG,CAACoB,GAAJ;AACD;AACF,GAnBM,CAAP;AAoBD","sourcesContent":["const path = require(\"path\");\nconst dirPath = path.join(process.cwd(), \"/twitterAPI\");\nconst twitterAPI = require(\"../../twitterAPI/geoStream.js\");\n\nexport default function handler(req, res) {\n  return new Promise((resolve) => {\n    if (req.method == \"POST\") {\n      const parameters = {\n        locations: req.body.coordinates,\n        track: req.body.hashtags,\n      };\n      const coordinates = req.body.coordinates;\n      console.log(\"starting stream on \", coordinates);\n      const streamID = twitterAPI.startStream(parameters);\n      res.send(streamID);\n      resolve();\n    } else if (req.method == \"DELETE\") {\n      const streamID = req.body.id;\n      const { dataJson, error } = twitterAPI.closeStream(streamID);\n      res.json(dataJson);\n      resolve();\n    } else {\n      res.end();\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}