{"ast":null,"code":"const path = require(\"path\");\n\nconst dirPath = path.join(process.cwd(), \"/twitterAPI\");\n\nconst twitterAPI = require(\"../../twitterAPI/geoStream.js\");\n\nexport default function handler(req, res) {\n  return new Promise(resolve => {\n    if (req.method == \"POST\") {\n      const parameters = {\n        locations: req.body.coordinates\n      };\n      const coordinates = req.body.coordinates;\n      console.log(\"starting stream on \", coordinates);\n      const streamID = twitterAPI.startStream(parameters);\n      res.send(streamID);\n      resolve();\n    } else if (req.method == \"DELETE\") {\n      const streamID = req.body.id;\n      const {\n        dataJson,\n        error\n      } = twitterAPI.closeStream(streamID);\n      res.json(dataJson);\n      resolve();\n    } else {\n      res.end();\n    }\n  });\n}","map":{"version":3,"sources":["/home/notchla/Documents/IngSw/twitter-tracker/pages/api/geoFilter.js"],"names":["path","require","dirPath","join","process","cwd","twitterAPI","handler","req","res","Promise","resolve","method","parameters","locations","body","coordinates","console","log","streamID","startStream","send","id","dataJson","error","closeStream","json","end"],"mappings":"AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,OAAO,GAAGF,IAAI,CAACG,IAAL,CAAUC,OAAO,CAACC,GAAR,EAAV,EAAyB,aAAzB,CAAhB;;AACA,MAAMC,UAAU,GAAGL,OAAO,CAAC,+BAAD,CAA1B;;AAEA,eAAe,SAASM,OAAT,CAAiBC,GAAjB,EAAsBC,GAAtB,EAA2B;AACxC,SAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9B,QAAIH,GAAG,CAACI,MAAJ,IAAc,MAAlB,EAA0B;AACxB,YAAMC,UAAU,GAAG;AACjBC,QAAAA,SAAS,EAAEN,GAAG,CAACO,IAAJ,CAASC;AADH,OAAnB;AAGA,YAAMA,WAAW,GAAGR,GAAG,CAACO,IAAJ,CAASC,WAA7B;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,WAAnC;AACA,YAAMG,QAAQ,GAAGb,UAAU,CAACc,WAAX,CAAuBP,UAAvB,CAAjB;AACAJ,MAAAA,GAAG,CAACY,IAAJ,CAASF,QAAT;AACAR,MAAAA,OAAO;AACR,KATD,MASO,IAAIH,GAAG,CAACI,MAAJ,IAAc,QAAlB,EAA4B;AACjC,YAAMO,QAAQ,GAAGX,GAAG,CAACO,IAAJ,CAASO,EAA1B;AACA,YAAM;AAAEC,QAAAA,QAAF;AAAYC,QAAAA;AAAZ,UAAsBlB,UAAU,CAACmB,WAAX,CAAuBN,QAAvB,CAA5B;AACAV,MAAAA,GAAG,CAACiB,IAAJ,CAASH,QAAT;AACAZ,MAAAA,OAAO;AACR,KALM,MAKA;AACLF,MAAAA,GAAG,CAACkB,GAAJ;AACD;AACF,GAlBM,CAAP;AAmBD","sourcesContent":["const path = require(\"path\");\nconst dirPath = path.join(process.cwd(), \"/twitterAPI\");\nconst twitterAPI = require(\"../../twitterAPI/geoStream.js\");\n\nexport default function handler(req, res) {\n  return new Promise((resolve) => {\n    if (req.method == \"POST\") {\n      const parameters = {\n        locations: req.body.coordinates,\n      };\n      const coordinates = req.body.coordinates;\n      console.log(\"starting stream on \", coordinates);\n      const streamID = twitterAPI.startStream(parameters);\n      res.send(streamID);\n      resolve();\n    } else if (req.method == \"DELETE\") {\n      const streamID = req.body.id;\n      const { dataJson, error } = twitterAPI.closeStream(streamID);\n      res.json(dataJson);\n      resolve();\n    } else {\n      res.end();\n    }\n  });\n}\n"]},"metadata":{},"sourceType":"module"}