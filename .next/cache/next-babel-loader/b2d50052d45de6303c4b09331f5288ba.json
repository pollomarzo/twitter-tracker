{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/notchla/Documents/IngSw/twitter-tracker/components/MainContainer.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow, InputField } from './';\nimport styles from \"../styles/Home.module.css\";\nconst useStyles = makeStyles(() => ({\n  submitButton: {\n    margin: 10,\n    width: 100,\n    fontWeight: 800,\n    color: \"white\",\n    backgroundColor: \"#1DA1F2\",\n    \"&:hover\": {\n      backgroundColor: \"lightblue\",\n      color: \"#1DA1F2\"\n    }\n  }\n}));\n\nconst MainContainer = () => {\n  const {\n    textField,\n    submitButton\n  } = useStyles(); // To set the id of the current stream\n\n  const {\n    0: streamId,\n    1: setStreamId\n  } = useState(undefined);\n  const {\n    0: error,\n    1: setError\n  } = useState(false); // A set of coords to initialize a geolocalized stream\n\n  const {\n    0: coords,\n    1: setCoordinates\n  } = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0\n  });\n\n  const handleChange = e => setCoordinates(_objectSpread(_objectSpread({}, coords), {}, {\n    [e.target.name]: e.target.value\n  }));\n\n  const openStream = () => {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n    let correctInput = true;\n    const correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\"); // Check if the params are correct\n\n    Object.values(coords).forEach(value => correctInput = correctInput && correctFormatRegEx.test(value));\n\n    if (correctInput) {\n      axios.post(\"/api/geoFilter\", {\n        coordinates: `${coords.longitudeStart},${coords.latitudeStart},${coords.longitudeEnd},${coords.latitudeEnd}`\n      }).then(res => setStreamId(res.data)).catch(err => console.log(err));\n    } else setError(true);\n  };\n\n  const closeStream = () => {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n    axios.delete(\"/api/geoFilter\", {\n      data: {\n        id: streamId\n      },\n      headers: {\n        Authorization: \"***\"\n      }\n    }).then(_ => setStreamId(undefined)).catch(err => console.warn(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(NoSsr, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.title,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.titleH1,\n          children: \"TWITTER TRACKER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Longitude start\",\n          fieldName: \"longitudeStart\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Latitude start\",\n          fieldName: \"latitudeStart\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Longitude end\",\n          fieldName: \"longitudeEnd\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(InputField, {\n          label: \"Latitude end\",\n          fieldName: \"latitudeEnd\",\n          handler: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.submit,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: streamId ? closeStream : openStream,\n            variant: \"contained\",\n            className: submitButton,\n            color: \"default\",\n            children: streamId ? \"STOP\" : \"START\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              in: streamId !== undefined,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 97,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AlertWindow, {\n          isOpen: error,\n          onConfirm: setError,\n          title: \"Error\",\n          msg: \"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\nexport default MainContainer;","map":{"version":3,"sources":["/home/notchla/Documents/IngSw/twitter-tracker/components/MainContainer.js"],"names":["React","useState","axios","CircularProgress","Fade","Button","makeStyles","NoSsr","AlertWindow","InputField","styles","useStyles","submitButton","margin","width","fontWeight","color","backgroundColor","MainContainer","textField","streamId","setStreamId","undefined","error","setError","coords","setCoordinates","latitudeStart","latitudeEnd","longitudeStart","longitudeEnd","handleChange","e","target","name","value","openStream","correctInput","correctFormatRegEx","RegExp","Object","values","forEach","test","post","coordinates","then","res","data","catch","err","console","log","closeStream","delete","id","headers","Authorization","_","warn","main","title","titleH1","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow, InputField } from './'\n\nimport styles from \"../styles/Home.module.css\";\n\nconst useStyles = makeStyles(() => ({\n  submitButton: {\n    margin: 10,\n    width: 100,\n    fontWeight: 800,\n    color: \"white\",\n    backgroundColor: \"#1DA1F2\",\n    \"&:hover\": {\n      backgroundColor: \"lightblue\",\n      color: \"#1DA1F2\",\n    }\n  }\n}));\n\nconst MainContainer = () => {\n  const { textField, submitButton } = useStyles();\n  // To set the id of the current stream\n  const [streamId, setStreamId] = useState(undefined);\n  const [error, setError] = useState(false);\n\n  // A set of coords to initialize a geolocalized stream\n  const [coords, setCoordinates] = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0,\n  });\n\n  const handleChange = (e) =>\n    setCoordinates({ ...coords, [e.target.name]: e.target.value });\n\n  const openStream = () => {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n\n    let correctInput = true;\n    const correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\");\n    // Check if the params are correct\n    Object.values(coords).forEach(\n      (value) => (correctInput = correctInput && correctFormatRegEx.test(value))\n    );\n\n    if (correctInput) {\n      axios\n        .post(\"/api/geoFilter\", {\n          coordinates: `${coords.longitudeStart},${coords.latitudeStart},${coords.longitudeEnd},${coords.latitudeEnd}`,\n        })\n        .then((res) => setStreamId(res.data))\n        .catch((err) => console.log(err));\n    } else setError(true);\n  };\n\n  const closeStream = () => {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n\n    axios\n      .delete(\"/api/geoFilter\", {\n        data: { id: streamId },\n        headers: { Authorization: \"***\" },\n      })\n      .then((_) => setStreamId(undefined))\n      .catch((err) => console.warn(err));\n  };\n\n  return (\n    <NoSsr>\n      <div className={styles.main}>\n        <header className={styles.title}>\n          <h1 className={styles.titleH1}>TWITTER TRACKER</h1>\n        </header>\n\n        <div className={styles.form}>\n          <InputField label=\"Longitude start\" fieldName=\"longitudeStart\" handler={handleChange} />\n          <InputField label=\"Latitude start\" fieldName=\"latitudeStart\" handler={handleChange} />\n          <InputField label=\"Longitude end\" fieldName=\"longitudeEnd\" handler={handleChange} />\n          <InputField label=\"Latitude end\" fieldName=\"latitudeEnd\" handler={handleChange} />\n\n          <div className={styles.submit}>\n            <Button\n              onClick={streamId ? closeStream : openStream}\n              variant=\"contained\"\n              className={submitButton}\n              color=\"default\"\n            >\n              {streamId ? \"STOP\" : \"START\"}\n            </Button>\n            <div>\n              <Fade in={streamId !== undefined} unmountOnExit>\n                <CircularProgress />\n              </Fade>\n            </div>\n          </div>\n\n          <AlertWindow\n            isOpen={error}\n            onConfirm={setError}\n            title=\"Error\"\n            msg=\"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n          />\n        </div>\n      </div>\n    </NoSsr>\n  );\n};\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}