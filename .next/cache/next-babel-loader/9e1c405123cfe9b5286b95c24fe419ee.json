{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/notchla/Documents/IngSw/twitter-tracker/pages/components/MainContainer.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, TextField, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow } from './';\nimport styles from \"../../styles/Home.module.css\";\nconst useStyles = makeStyles(() => ({\n  textField: {\n    margin: 10,\n    width: 300,\n    [`& fieldset`]: {\n      borderWidth: 2,\n      borderRadius: 25\n    },\n    \"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\": {\n      borderColor: \"#1DA1F2\"\n    },\n    \"& .MuiOutlinedInput-input\": {\n      color: \"#1DA1F2\"\n    },\n    \"& .MuiInputLabel-outlined\": {\n      color: \"#1DA1F2\"\n    }\n  },\n  submitButton: {\n    margin: 10,\n    width: 100,\n    fontWeight: 800,\n    color: \"white\",\n    backgroundColor: \"#1DA1F2\",\n    \"&:hover\": {\n      backgroundColor: \"lightblue\",\n      color: \"#1DA1F2\"\n    }\n  }\n}));\n\nconst MainContainer = () => {\n  const {\n    textField,\n    submitButton\n  } = useStyles(); // To set the id of the current stream\n\n  const {\n    0: streamId,\n    1: setStreamId\n  } = useState(undefined);\n  const {\n    0: error,\n    1: setError\n  } = useState(false); // A set of coords to initialize a geolocalized stream\n\n  const {\n    0: coords,\n    1: setCoordinates\n  } = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0\n  });\n\n  const handleChange = e => setCoordinates(_objectSpread(_objectSpread({}, coords), {}, {\n    [e.target.name]: e.target.value\n  }));\n\n  const openStream = () => {\n    // A stream is already opened, error!\n    if (streamId !== undefined) return;\n    let correctInput = true;\n    const correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\"); // Check if the params are correct\n\n    Object.values(coords).forEach(value => correctInput = correctInput && correctFormatRegEx.test(value));\n\n    if (correctInput) {\n      axios.post(\"/api/geoFilter\", {\n        coordinates: coords\n      }).then(res => setStreamId(res.data)).catch(err => console.log(err));\n    } else setError(true);\n  };\n\n  const closeStream = () => {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n    axios.delete(\"/api/geoFilter\", {\n      data: {\n        id: streamId\n      },\n      headers: {\n        Authorization: \"***\"\n      }\n    }).then(_ => setStreamId(undefined)).catch(err => console.warn(err));\n  };\n\n  return /*#__PURE__*/_jsxDEV(NoSsr, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main,\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: styles.title,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: styles.titleH1,\n          children: \"TWITTER TRACKER\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.form,\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          id: \"longitudeStart\",\n          className: textField,\n          label: \"Longitude start\",\n          variant: \"outlined\",\n          name: \"longitudeStart\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"latitudeStart\",\n          className: textField,\n          label: \"Latitude start\",\n          variant: \"outlined\",\n          name: \"latitudeStart\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"longitudeEnd\",\n          className: textField,\n          label: \"Longitude end\",\n          variant: \"outlined\",\n          name: \"longitudeEnd\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(TextField, {\n          id: \"latitudeEnd\",\n          className: textField,\n          label: \"Latitude end\",\n          variant: \"outlined\",\n          name: \"latitudeEnd\",\n          required: true,\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.submit,\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: streamId ? closeStream : openStream,\n            variant: \"contained\",\n            className: submitButton,\n            color: \"default\",\n            children: streamId ? \"STOP\" : \"START\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(Fade, {\n              in: streamId !== undefined,\n              unmountOnExit: true,\n              children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(AlertWindow, {\n          isOpen: error,\n          onConfirm: setError,\n          title: \"Error\",\n          msg: \"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\nexport default MainContainer;","map":{"version":3,"sources":["/home/notchla/Documents/IngSw/twitter-tracker/pages/components/MainContainer.js"],"names":["React","useState","axios","CircularProgress","Fade","Button","makeStyles","TextField","NoSsr","AlertWindow","styles","useStyles","textField","margin","width","borderWidth","borderRadius","borderColor","color","submitButton","fontWeight","backgroundColor","MainContainer","streamId","setStreamId","undefined","error","setError","coords","setCoordinates","latitudeStart","latitudeEnd","longitudeStart","longitudeEnd","handleChange","e","target","name","value","openStream","correctInput","correctFormatRegEx","RegExp","Object","values","forEach","test","post","coordinates","then","res","data","catch","err","console","log","closeStream","delete","id","headers","Authorization","_","warn","main","title","titleH1","form","submit"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { CircularProgress, Fade, Button, makeStyles, TextField, NoSsr } from \"@material-ui/core\";\nimport { AlertWindow } from './'\n\nimport styles from \"../../styles/Home.module.css\";\n\nconst useStyles = makeStyles(() => ({\n  textField: {\n    margin: 10,\n    width: 300,\n    [`& fieldset`]: {\n      borderWidth: 2,\n      borderRadius: 25,\n    },\n    \"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline\": {\n      borderColor: \"#1DA1F2\",\n    },\n    \"& .MuiOutlinedInput-input\": {\n      color: \"#1DA1F2\",\n    },\n    \"& .MuiInputLabel-outlined\": {\n      color: \"#1DA1F2\",\n    },\n  },\n  submitButton: {\n    margin: 10,\n    width: 100,\n    fontWeight: 800,\n    color: \"white\",\n    backgroundColor: \"#1DA1F2\",\n    \"&:hover\": {\n      backgroundColor: \"lightblue\",\n      color: \"#1DA1F2\",\n    },\n  }\n}));\n\nconst MainContainer = () => {\n  const { textField, submitButton } = useStyles();\n  // To set the id of the current stream\n  const [streamId, setStreamId] = useState(undefined);\n  const [error, setError] = useState(false)\n\n  // A set of coords to initialize a geolocalized stream\n  const [coords, setCoordinates] = useState({\n    latitudeStart: 0,\n    latitudeEnd: 0,\n    longitudeStart: 0,\n    longitudeEnd: 0,\n  });\n\n  const handleChange = (e) =>\n    setCoordinates({ ...coords, [e.target.name]: e.target.value });\n\n  const openStream = () => {\n    // A stream is already opened, error!\n    if (streamId !== undefined) \n      return;\n\n    let correctInput = true;\n    const correctFormatRegEx = RegExp(\"^-?[1]?[0-8]?[0-9][.][0-9]{2}$\");\n    // Check if the params are correct\n    Object.values(coords).forEach(\n      value => correctInput = correctInput && correctFormatRegEx.test(value)\n    );\n\n    if (correctInput) { \n      axios\n        .post(\"/api/geoFilter\", { coordinates: coords })\n        .then((res) => setStreamId(res.data))\n        .catch((err) => console.log(err));\n    \n    } else \n      setError(true)\n  };\n\n  const closeStream = () => {\n    // A stram wasn't opened before, error!\n    if (streamId === undefined) return;\n\n    axios.delete(\"/api/geoFilter\", { data: { id: streamId }, headers: { Authorization: \"***\" }})\n      .then((_) => setStreamId(undefined))\n      .catch((err) => console.warn(err));\n  };\n\n  return (\n    <NoSsr>\n      <div className={styles.main}>\n        <header className={styles.title}>\n          <h1 className={styles.titleH1}>TWITTER TRACKER</h1>\n        </header>\n\n        <div className={styles.form}>\n          {/* ToDo Refractor this part */}\n          <TextField\n            id=\"longitudeStart\"\n            className={textField}\n            label=\"Longitude start\"\n            variant=\"outlined\"\n            name=\"longitudeStart\"\n            required\n            onChange={handleChange}\n          />\n          <TextField\n            id=\"latitudeStart\"\n            className={textField}\n            label=\"Latitude start\"\n            variant=\"outlined\"\n            name=\"latitudeStart\"\n            required\n            onChange={handleChange}\n          />\n          <TextField\n            id=\"longitudeEnd\"\n            className={textField}\n            label=\"Longitude end\"\n            variant=\"outlined\"\n            name=\"longitudeEnd\"\n            required\n            onChange={handleChange}\n          />\n          <TextField\n            id=\"latitudeEnd\"\n            className={textField}\n            label=\"Latitude end\"\n            variant=\"outlined\"\n            name=\"latitudeEnd\"\n            required\n            onChange={handleChange}\n          />\n\n          <div className={styles.submit}>\n            <Button\n              onClick={streamId ? closeStream : openStream}\n              variant=\"contained\"\n              className={submitButton}\n              color=\"default\"\n            >\n              {streamId ? \"STOP\" : \"START\"}\n            </Button>\n            <div>\n              <Fade in={streamId !== undefined} unmountOnExit>\n                <CircularProgress />\n              </Fade>\n            </div>\n          </div>\n\n          <AlertWindow\n            isOpen={error}\n            onConfirm={setError}\n            title=\"Error\"\n            msg=\"An acceptable input is a number in range [-180.00, 180.00] written with this formula\"\n          />\n\n        </div>\n      </div>\n    </NoSsr>\n  );\n};\n\nexport default MainContainer;\n"]},"metadata":{},"sourceType":"module"}