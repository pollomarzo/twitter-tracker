{"ast":null,"code":"const path = require('path');\n\nconst dirPath = path.join(process.cwd(), '/twitterAPI');\n\nconst twitterAPI = require('../../twitterAPI/geoStream.js');\n\nexport default function handler(req, res) {\n  return new Promise(resolve => {\n    switch (req.method) {\n      case 'POST':\n        {\n          const parameters = {\n            track: req.body.track ? req.body.track : '',\n            follow: req.body.follow ? req.body.follow : '',\n            locations: req.body.coordinates ? req.body.coordinates : ''\n          };\n          const type = req.body.type;\n          const coordinates = req.body.coordinates;\n          console.log('starting stream on ', coordinates);\n          const streamID = twitterAPI.startStream(type, parameters);\n          res.setHeader('Content-Type', 'text/plain');\n          res.send(streamID);\n          return resolve();\n        }\n\n      case 'DELETE':\n        {\n          const streamID = req.body.id; //should be body\n\n          console.log(streamID);\n          const {\n            dataJson,\n            error\n          } = twitterAPI.closeStream(streamID);\n          res.json(dataJson);\n          return resolve();\n        }\n\n      default:\n        res.end();\n    }\n  });\n}","map":null,"metadata":{},"sourceType":"module"}